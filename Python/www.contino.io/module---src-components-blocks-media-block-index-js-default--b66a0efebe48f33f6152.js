(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{L2Jg:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var r=n("oedh"),i=n("mXGw"),o=n.n(i),a=n("2peb"),s=n("Cini"),c=n("eP3y"),l=n("SbgB"),d=n("6Uku"),u=n("SUdF"),f=n("oCA+");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=i.createElement("path",{d:"M53 31L0 62V0z",fill:"#fff"});function g(e){return i.createElement("svg",p({width:53,height:62,viewBox:"0 0 53 62"},e),h)}function m(e){var t=e.sx,n=e.src,i=(e.background,e.controls,e.muted),a=e.autoplay,s=void 0!==a&&a,c=e.loop,d=e.immediate,p=void 0!==d&&d,h=e.inline,m=void 0!==h&&h,v=e.sources,b=(e.children,e.onPlay),y=e.isPlaying,w=e.poster,x=Object(r.a)(e,["sx","src","background","controls","muted","autoplay","loop","immediate","inline","sources","children","onPlay","isPlaying","poster"]),O=o.a.useRef(),E=o.a.useRef(v),j=Object(u.b)({triggerOnce:!0,rootMargin:"20% 0px"}),k=j[0],C=j[1],I=o.a.useCallback((function(){O.current.play(),b&&b()}),[b]);return o.a.useEffect((function(){(C||p)&&s&&(O.current.play(),b&&b())}),[s,p,C,b]),o.a.useEffect((function(){var e=O.current;y?e.play():e.pause()}),[y]),o.a.useEffect((function(){E.current&&(E.current.mp4!==v.mp4&&O.current.load(),E.current=v)}),[v]),o.a.createElement(l.a,{ref:k,sx:{position:"relative",width:"100%",height:"100%"}},o.a.createElement(l.a,Object.assign({as:"video",ref:O,sx:Object.assign({display:"block",width:"100%"},t),muted:i,loop:c,controls:y,playsInline:m,src:n,onPlay:b,poster:w.asset.fixed.src},x),v&&o.a.createElement("source",{src:v.mp4,type:"video/mp4"})),o.a.createElement(l.a,{onClick:I,sx:Object.assign({},f.d,{zIndex:1,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transitionDuration:function(e){return e.transitions.normal},transitionProperty:"all",backgroundColor:"rgba(0, 0, 0, 0.3)",svg:{transitionDuration:function(e){return e.transitions.fast}},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)",svg:{transform:"scale(1.1)"}}}),style:{display:y?"none":"flex"}},o.a.createElement(g,null)))}function v(e){var t=e.node,n=e.imageProps,r=e.videoProps,i=e.sx;return t[0].asset?o.a.createElement(d.a,Object.assign({fluid:t[0].asset.fluid,alt:t[0].alt,extension:t[0].asset.extension,sx:i},n)):o.a.createElement(m,Object.assign({src:t[0].file.asset.url,poster:t[0].poster,sx:i},r))}var b=n("u2Ol"),y=n("dY+r");var w=function(e){var t=o.a.useState(!1),n=t[0],r=t[1],i=o.a.useCallback((function(t){t.key===e&&r(!0)}),[e]),a=o.a.useCallback((function(t){t.key===e&&r(!1)}),[e]);return o.a.useEffect((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",a)}}),[i,a]),n},x=n("qHjP"),O={type:"spring",stiffness:200,damping:30},E={type:"spring",stiffness:300,damping:35};function j(e){switch(e){case"center":return{gridTemplateColumns:"0 3fr 5fr 0",gridTemplateAreas:["'. text text .'\n          '. media media .'","'. text . .'\n          '. media media .'"]};case"fullscreen":return{gridTemplateColumns:"0 3fr 5fr 0",gridTemplateAreas:"'. text . .'\n          'media media media media'",".media":{gridRowStart:1,my:[-5,"-gridGap"]}};case"left":return{gridTemplateColumns:"0 5fr 3fr 0",gridTemplateAreas:["'. text text .'\n          '. media media .'","'. media text'"]};case"right":default:return{gridTemplateColumns:"0 3fr 5fr 0",gridTemplateAreas:["'. text text .'\n          '. media media .'","'. text media'"]}}}function k(e){var t=e._rawDescription,n=e.buttons,i=e.media,d=(Object(r.a)(e,["_rawDescription","buttons","media"]),!!i.media[0].file),u=Object(s.c)().theme,f=o.a.useState(),p=f[0],h=f[1],g=Object(a.g)().scrollY,m=w("Escape");o.a.useEffect((function(){return g.onChange((function(){h(!1)}))}),[g]),o.a.useEffect((function(){h(!1)}),[m]);var k=Object(a.d)(p?u.zIndices.modal:0),C=o.a.useCallback((function(){h(!0)}),[]),I=o.a.useCallback((function(){h(!1)}),[]);return o.a.createElement(c.a,{as:"section",sx:Object.assign({py:[5,"gridGap"],background:"white",textAlign:["center","start"]},j(i.direction))},o.a.createElement(c.a.Col,{sx:{position:"relative",zIndex:1,gridArea:"text"}},t&&o.a.createElement(b.a,{blocks:t}),!!n.length&&o.a.createElement(l.a,{sx:{mt:4}},n.map(x.a).map((function(e){return o.a.createElement(y.a,Object.assign({key:e.to||e.href},e))})))),o.a.createElement(c.a.Col,{className:"media",sx:Object.assign({gridArea:"media",alignSelf:"center"},d&&{minHeight:[0,"50vh"]},p&&{paddingBottom:["56.25%",0]})},d&&o.a.createElement(a.a,null,p&&o.a.createElement(a.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:p?O:E,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:u.zIndices.modal,backgroundColor:"black"},onAnimationStart:function(){k.set(u.zIndices.modal)},onAnimationComplete:function(){k.set(0)}})),o.a.createElement(l.a,{sx:function(e){return Object.assign({},p&&{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",overflow:"hidden",padding:"gridGap",zIndex:"modal"})},onClick:I},o.a.createElement(a.b.div,{layoutTransition:p?O:E,style:{position:"relative",zIndex:k}},o.a.createElement(v,{node:i.media,videoProps:{onPlay:C,isPlaying:p},sx:Object.assign({},d&&{height:["auto","50vh"],objectFit:"cover"},p&&{height:"auto"})})))))}},SUdF:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var r=n("mXGw");var i=function(e,t){if(!e)throw new Error("Invariant failed")};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=new Map,l=new Map,d=new Map,u=0;function f(e,t,n){void 0===n&&(n={}),n.threshold||(n.threshold=0);var r=n,o=r.root,a=r.rootMargin,s=r.threshold;if(c.has(e)&&i(!1),e){var f=function(e){return e?d.has(e)?d.get(e):(u+=1,d.set(e,u.toString()),d.get(e)+"_"):""}(o)+(a?s.toString()+"_"+a:s.toString()),p=l.get(f);p||(p=new IntersectionObserver(h,n),f&&l.set(f,p));var g={callback:t,element:e,inView:!1,observerId:f,observer:p,thresholds:p.thresholds||(Array.isArray(s)?s:[s])};return c.set(e,g),p.observe(e),g}}function p(e){if(e){var t=c.get(e);if(t){var n=t.observerId,r=t.observer,i=r.root;r.unobserve(e);var o=!1,a=!1;n&&c.forEach((function(t,r){r!==e&&(t.observerId===n&&(o=!0,a=!0),t.observer.root===i&&(a=!0))})),!a&&i&&d.delete(i),r&&!o&&r.disconnect(),c.delete(e)}}}function h(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,r=e.target,i=c.get(r);if(i&&n>=0){var o=i.thresholds.some((function(e){return i.inView?n>e:n>=e}));void 0!==t&&(o=o&&t),i.inView=o,i.callback(o,e)}}))}var g=function(e){var t,n;function c(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return o(s(t=e.call.apply(e,[this].concat(r))||this),"state",{inView:!1,entry:void 0}),o(s(t),"node",null),o(s(t),"handleNode",(function(e){t.node&&(p(t.node),e||t.props.triggerOnce||t.setState({inView:!1,entry:void 0})),t.node=e||null,t.observeNode()})),o(s(t),"handleChange",(function(e,n){(e!==t.state.inView||e)&&t.setState({inView:e,entry:n}),t.props.onChange&&t.props.onChange(e,n)})),t}n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=c.prototype;return l.componentDidMount=function(){this.node||i(!1)},l.componentDidUpdate=function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(p(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(p(this.node),this.node=null)},l.componentWillUnmount=function(){this.node&&(p(this.node),this.node=null)},l.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin;f(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r})}},l.render=function(){var e=this.state,t=e.inView,n=e.entry;if(!function(e){return"function"!=typeof e.children}(this.props))return this.props.children({inView:t,entry:n,ref:this.handleNode});var i=this.props,o=i.children,s=i.as,c=i.tag,l=(i.triggerOnce,i.threshold,i.root,i.rootMargin,i.onChange,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(i,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange"]));return Object(r.createElement)(s||c||"div",a({ref:this.handleNode},l),o)},c}(r.Component);o(g,"displayName","InView"),o(g,"defaultProps",{threshold:0,triggerOnce:!1});var m={inView:!1,entry:void 0};function v(e){void 0===e&&(e={});var t=Object(r.useRef)(),n=Object(r.useState)(m),i=n[0],o=n[1],a=Object(r.useCallback)((function(n){t.current&&p(t.current),n&&f(n,(function(t,r){o({inView:t,entry:r}),t&&e.triggerOnce&&p(n)}),e),t.current=n}),[e.threshold,e.root,e.rootMargin,e.triggerOnce]);return Object(r.useEffect)((function(){t.current||i===m||e.triggerOnce||o(m)})),[a,i.inView,i.entry]}}}]);
//# sourceMappingURL=module---src-components-blocks-media-block-index-js-default--b66a0efebe48f33f6152.js.map