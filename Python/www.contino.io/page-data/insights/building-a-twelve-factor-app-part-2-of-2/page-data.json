{"componentChunkName":"component---src-templates-article-js","path":"/insights/building-a-twelve-factor-app-part-2-of-2","result":{"data":{"sanityArticle":{"publishedAt":"4 May 2017","publishedAtRaw":"2017-05-04","title":"Building a Twelve Factor App (Part 2 of 2)","seoTitle":"Building a Twelve Factor App (Part 2 of 2)","seoDescription":"Contino are a DevOps &amp; Cloud Transformation Consultancy who help large enterprises accelerate their software delivery and journey to the cloud in an accelerated","slug":{"current":"building-a-twelve-factor-app-part-2-of-2"},"heroImage":{"alt":"Building a Twelve Factor App (Part 2 of 2)","asset":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACAUlEQVQoz0WSW5OaQBCF+dPZp8SKu+pLosb1ioAgKqAIIuAdtHQ30a2K+5dOunuTykPXjDjzzTl9WnHdMSaTETx3gkU4R5ossdmspJbLBebzGUL6HkUhokUgez6r6320W000mw08N+pSLdorQeBjQQeXcoEqWhBsjf1+h/V6hVWaIF5G8GdTeJ4D359iNvMwGdsYDHR0Oi3U61U0ftTQpb0SxxFdiulyitUqEUieZ8iyA4JgTurHsKwBVLWHdruFPq0Mm01dWTVNJaXP6LSb9F8XSkqw9C/wcNjhfD7hdv2Fl5cLRiMbpdITKpUSqtVveHwsym9d64tKhx8zDbGv9Xv0XSUg9YwVcs+Ox0xg7+93vL3dYNtDPDx8QqHwhYDfZS0UPkPtdTH1XDjOGCPbEgcm2R8YGpSEgWR1u13jdMpxu11xv//G5XKGYegoFr+iXH5CrVYVpZVKWRRNqZ8uhcO2GTokqGUZBKQeSh8JmucHvL5ecL3+lL3rOvSyIWDTJBVkj5WwMgY6NB3/gPbQlFIkXaokibAl21m2F6VHAm4pbe4vP8jneIx45fHiUBjIMLE70KSfCv/J8yWHqfjyhgLa7zY0OhvpLbvg8QqpGBiG/gfQGYlVTpdDsUwdiu97CGR4fSl+ICbwxyglopDn1KdU5zSDDPUl4f/qJGFdFYV/ALKKUCDqCVJ4AAAAAElFTkSuQmCC","aspectRatio":2,"src":"https://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png","srcSet":"https://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?w=200&h=100&fit=crop 200w,\nhttps://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?w=400&h=200&fit=crop 400w,\nhttps://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png 800w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?w=200&h=100&fit=crop&fm=webp 200w,\nhttps://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?w=400&h=200&fit=crop&fm=webp 400w,\nhttps://cdn.sanity.io/images/hgftikht/production/a38c640712be6da4f414167c44b866692506bd1e-800x400.png?fm=webp 800w","sizes":"(max-width: 800px) 100vw, 800px"}}},"_rawBody":[{"_key":"29208e0746d2","_type":"block","children":[{"_key":"501eef17c240","_type":"span","marks":["em"],"text":"By Alex Manly, Principal DevOps Consultant at Contino. This is part 2 of 2. Part 1 of this blog can be found "},{"_key":"619a79e45945","_type":"span","marks":["em","5326fc66502a"],"text":"here"},{"_key":"5fd02416aafb","_type":"span","marks":["em"],"text":"."}],"markDefs":[{"_key":"5326fc66502a","_type":"link","href":"http://www.contino.io/insights/building-a-twelve-factor-application-part-one"}],"style":"normal"},{"_key":"a7f793ff42eb","_type":"block","children":[{"_key":"0dd6137bdacc0","_type":"span","marks":[],"text":"In "},{"_key":"0dd6137bdacc1","_type":"span","marks":["f976fe46a292"],"text":"my first post"},{"_key":"0dd6137bdacc2","_type":"span","marks":[],"text":" I discussed the theory of developing an application, now let’s see how I developed the application….? All the code in this example can be found in my "},{"_key":"0dd6137bdacc3","_type":"span","marks":["a070b66d7dd8"],"text":"GitHub repository"},{"_key":"0dd6137bdacc4","_type":"span","marks":[],"text":"."}],"markDefs":[{"_key":"f976fe46a292","_type":"link","href":"https://www.contino.io/blog/building-a-twelve-factor-application-part-one"},{"_key":"a070b66d7dd8","_type":"link","href":"https://github.com/alexmanly/hashicorp-demo/tree/master/application"}],"style":"normal"},{"_key":"512980965313","_type":"block","children":[{"_key":"447d5973c1fe0","_type":"span","marks":[],"text":"The first thing I defined was the application dependencies. This includes all the SpringBoot and Spring Vault dependencies that are required for my application. I chose SpringBoot as the Java framework as I am familiar with Spring and it allows you to build Java Web applications without the need for an external Web Server. Tomcat is embedded, via the dependencies, and it has the ability to provide production-ready features such as metrics, health checks and externalized configuration. I followed the Spring Boot guides here to help me defined this application: "},{"_key":"447d5973c1fe1","_type":"span","marks":["2e2464eb87b2"],"text":"SpringBoot Docs"},{"_key":"447d5973c1fe2","_type":"span","marks":[],"text":"."}],"markDefs":[{"_key":"2e2464eb87b2","_type":"link","href":"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle"}],"style":"normal"},{"_key":"b76e277bec7f","_type":"block","children":[{"_key":"ee04bed58ca80","_type":"span","marks":[],"text":"<dependencies> <dependency> <groupId>org.springframework.cloud</groupId> <artifactId>spring-cloud-vault-starter-config</artifactId> <version>1.0.0.BUILD-SNAPSHOT</version> </dependency> <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter</artifactId> <version>2.0.0.BUILD-SNAPSHOT</version> <exclusions> <exclusion> <groupId>commons-logging</groupId> <artifactId>commons-logging</artifactId> </exclusion> </exclusions> </dependency> <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-tomcat</artifactId> <version>2.0.0.BUILD-SNAPSHOT</version> </dependency> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-webmvc</artifactId> <version>4.3.3.RELEASE</version> </dependency> <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-test</artifactId> <scope>test</scope> <version>2.0.0.BUILD-SNAPSHOT</version> <exclusions> <exclusion> <groupId>commons-logging</groupId> <artifactId>commons-logging</artifactId> </exclusion> </exclusions> </dependency> <!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-beans</artifactId> <version>4.3.3.RELEASE</version> </dependency> <!-- https://mvnrepository.com/artifact/org.springframework/spring-context --> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-context</artifactId> <version>4.3.3.RELEASE</version> </dependency> <!-- https://mvnrepository.com/artifact/org.springframework/spring-web --> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-web</artifactId> <version>4.3.3.RELEASE</version> </dependency> <!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-actuator --> <dependency> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-actuator</artifactId> <version>1.4.1.RELEASE</version> </dependency> </dependencies>Copy"}],"markDefs":[],"style":"normal"},{"_key":"65cdf20100c0","_type":"block","children":[{"_key":"220ee7ed58120","_type":"span","marks":[],"text":"Next I had to define my application configuration file (application.properties) this is externalized from the application and not built into the Jar file. The application knows where to load this configuration from by use of the command line argument `--spring.config.location=<Path to directory of config files>`. The application configuration includes which port to bind HTTP to and which port to expose the management endpoints to."}],"markDefs":[],"style":"normal"},{"_key":"46d35c7305f4","_type":"block","children":[{"_key":"51847f47884d0","_type":"span","marks":[],"text":"server.compression.enabled: true server.compression.min-response-size: 1 server.port: 8090 management.port: 8091 management.address: 127.0.0.1 info.app.name: Twelve Factor Demo Application info.app.description: This is my 12 factor app info.app.version: 1.0.0Copy"}],"markDefs":[],"style":"normal"},{"_key":"a4b83b9a521a","_type":"block","children":[{"_key":"c52c8ecd2a520","_type":"span","marks":[],"text":"The bootstrap configuration file (bootstrap.properties) contains the information required to connect to my Vault Server to retrieve the application secrets, such as passwords and database connections."}],"markDefs":[],"style":"normal"},{"_key":"b9af25063161","_type":"block","children":[{"_key":"0ff77bd180a10","_type":"span","marks":[],"text":"spring.application.name: hashiapp-demo spring.cloud.vault.host: <REDACTED> spring.cloud.vault.port: 8200 spring.cloud.vault.scheme: http spring.cloud.vault.token: <REDACTED> spring.cloud.vault.connection-timeout: 5000 spring.cloud.vault.read-timeout: 15000 spring.cloud.vault.config.order: -10Copy"}],"markDefs":[],"style":"normal"},{"_key":"3468cb459995","_type":"block","children":[{"_key":"e9c03fd1c77b0","_type":"span","marks":[],"text":"Once the configuration is defined, I can then create my first SpringBoot application. Note the logging statements which shows when the application starts and stops. This is important that the application outputs all its the events and I do not define where to stream the events to. Later when I define the Upstart service configuration I direct this stream to a file on disk. SpringBoot also allows you to define logging levels and what to log."}],"markDefs":[],"style":"normal"},{"_key":"082fd9b8ce6f","_type":"block","children":[{"_key":"dd5b7b30368a0","_type":"span","marks":[],"text":"import javax.servlet.ServletContextEvent; import javax.servlet.ServletContextListener; import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.EnableAutoConfiguration; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.ComponentScan; import org.springframework.context.annotation.Configuration; @SpringBootApplication @Configuration @ComponentScan @EnableAutoConfiguration public class MyApp { private static Log logger = LogFactory.getLog(MyApp.class); @Bean protected ServletContextListener listener() { return new ServletContextListener() { public void contextInitialized(ServletContextEvent sce) { logger.info(\"Starting MyApp application...\"); } public void contextDestroyed(ServletContextEvent sce) { logger.info(\"MyApp application destroyed\"); } }; } public static void main(String[] args) throws Exception { SpringApplication.run(MyApp.class, args); } }Copy"}],"markDefs":[],"style":"normal"},{"_key":"53202c6272b2","_type":"block","children":[{"_key":"4e0e641be5b60","_type":"span","marks":[],"text":"Next I need to expose an endpoint, in this instance '/vault', which returns the secret stored in Vault. The password value is automagically inserted into the application, using dependency injection, based on the configuration information in the `bootstrap.properties` file. The file is used to go to Vault to retrieve that value on application start-up. It will be served from this URL: "},{"_key":"4e0e641be5b61","_type":"span","marks":["30a9d76bff20"],"text":"http://localhost:8090/vault"},{"_key":"4e0e641be5b62","_type":"span","marks":[],"text":". I followed this "},{"_key":"4e0e641be5b63","_type":"span","marks":["f3f20c5c89a3"],"text":"Spring Boot Vault Blog"},{"_key":"4e0e641be5b64","_type":"span","marks":[],"text":" to understand how to configure this integration. This value could just as easily be a connection string to a database. In later iterations of this project I will use Vault to store the database credentials and then generate dynamic credentials that the application can use to access the database."}],"markDefs":[{"_key":"30a9d76bff20","_type":"link","href":"http://localhost:8090/vault"},{"_key":"f3f20c5c89a3","_type":"link","href":"https://spring.io/blog/2016/06/24/managing-secrets-with-vault"}],"style":"normal"},{"_key":"3b3156582f84","_type":"block","children":[{"_key":"b173ff216f620","_type":"span","marks":[],"text":"import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; import org.springframework.beans.factory.annotation.Value; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; @RestController class VaultController { private static Log logger = LogFactory.getLog(VaultController.class); @Value(\"${password}\") String password; @RequestMapping(\"/vault\") public String getSecret() { return \"Vault secret : \" + password + \"\\n\"; } }Copy"}],"markDefs":[],"style":"normal"},{"_key":"f638baa407c2","_type":"block","children":[{"_key":"db041001386b0","_type":"span","marks":[],"text":"This endpoint will be served from this URL: "},{"_key":"db041001386b1","_type":"span","marks":["0cf5fb5c4cac"],"text":"http://localhost:8090/vault"},{"_key":"db041001386b2","_type":"span","marks":[],"text":". The output would look something like this:"}],"markDefs":[{"_key":"0cf5fb5c4cac","_type":"link","href":"http://localhost:8090/vault"}],"style":"normal"},{"_key":"9c4fa1f93b78","_type":"block","children":[{"_key":"c85813ef61f80","_type":"span","marks":[],"text":"Vault secret : MyS3cr3tP@ssw0rdCopy"}],"markDefs":[],"style":"normal"},{"_key":"df54935827ba","_type":"block","children":[{"_key":"61c3d9a1e6090","_type":"span","marks":[],"text":"The last part of the application code is to expose the health of the application using Actuator management endpoints. Actuators enable production-ready features to a Spring Boot application without having to build the features yourself. They’re mainly used to expose different types of information about the running application – health, metrics, info, dump, env etc. While these are no replacement for a production ready monitoring solution – they’re a very good starting point. The setting above `management.port` states that this endpoint will be bound to the port 8081. This endpoint will display whether the application environment has enough disk space and will report accordingly."}],"markDefs":[],"style":"normal"},{"_key":"65b5b60c5dea","_type":"block","children":[{"_key":"522bd721ab290","_type":"span","marks":[],"text":"import java.io.IOException; import java.nio.file.FileStore; import java.nio.file.Files; import java.nio.file.Paths; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.actuate.health.AbstractHealthIndicator; import org.springframework.boot.actuate.health.Health; import org.springframework.stereotype.Component; @Component public class DiskSpaceHealthIndicator extends AbstractHealthIndicator { private final FileStore fileStore; private final long thresholdBytes; @Autowired public DiskSpaceHealthIndicator(@Value(\"${health.filestore.path:${user.dir}}\") String path, @Value(\"${health.filestore.threshold.bytes:10485760}\") long thresholdBytes) throws IOException { fileStore = Files.getFileStore(Paths.get(path)); this.thresholdBytes = thresholdBytes; } @Override protected void doHealthCheck(Health.Builder builder) throws Exception { long diskFreeInBytes = fileStore.getUnallocatedSpace(); if (diskFreeInBytes >= thresholdBytes) { builder.up(); } else { builder.down(); } long totalSpaceInBytes = fileStore.getTotalSpace(); builder.withDetail(\"disk.free\", diskFreeInBytes); builder.withDetail(\"disk.total\", totalSpaceInBytes); } }Copy"}],"markDefs":[],"style":"normal"},{"_key":"a51be0b3648f","_type":"block","children":[{"_key":"f8a7976c78010","_type":"span","marks":[],"text":"This endpoint will be served from this URL: "},{"_key":"f8a7976c78011","_type":"span","marks":["92099b2cc9c3"],"text":"http://localhost:8091/health"},{"_key":"f8a7976c78012","_type":"span","marks":[],"text":". Later in the blog series I will show how we can register this service with Consul to monitor the health of this application. The output of this endpoint would look something like this:"}],"markDefs":[{"_key":"92099b2cc9c3","_type":"link","href":"http://localhost:8091/health"}],"style":"normal"},{"_key":"e75191b32b9d","_type":"block","children":[{"_key":"3e785a507f1b0","_type":"span","marks":[],"text":"{ \"status\":\"UP\", \"customHealthCheck\":{ \"status\":\"UP\"}, \"diskSpace\":{\"status\":\"UP\",\"disk.free\":62681706496,\"disk.total\":499071844352}, \"refreshScope\":{\"status\":\"UP\"}, \"vault\":{\"status\":\"UP\"} } The Actuator framework also exposes the `info` endpoint (http://localhost:8091/info) which will return information from the application.properties file to an output like this: { \"App\":{ \"description\":\"This is my 12 factor app\", \"name\":\"Twelve Factor Demo Application\", \"version\":\"1.0.0\" } }Copy"}],"markDefs":[],"style":"normal"},{"_key":"1335bd580992","_type":"block","children":[{"_key":"4ff05b1355f40","_type":"span","marks":[],"text":"With the base application code written, I now need to build the application and deploy the artefact into the artefact repository, in this case and AWS S3 bucket. To do this I use Maven and I have configured it to use AWS S3 as the repository to store the resulting Jar file to. The maven pom.xml file and the maven settings files need to be configured to point to my AWS account. I followed this "},{"_key":"4ff05b1355f41","_type":"span","marks":["54356e5e98e9"],"text":"guide to an S3 repository for Maven"},{"_key":"4ff05b1355f42","_type":"span","marks":[],"text":" to set this integration up."}],"markDefs":[{"_key":"54356e5e98e9","_type":"link","href":"http://www.yegor256.com/2015/09/07/maven-repository-amazon-s3.html"}],"style":"normal"},{"_key":"4023b6e4923c","_type":"block","children":[{"_key":"62abb7e05b2e0","_type":"span","marks":[],"text":"<distributionManagement> <snapshotRepository> <id>myapp-demo</id> <url>s3://myapp-demo/snapshot</url> <uniqueVersion>false</uniqueVersion> </snapshotRepository> <repository> <id>myapp-demo</id> <url>s3://my app-demo/release</url> <uniqueVersion>false</uniqueVersion> </repository> </distributionManagement>Copy"}],"markDefs":[],"style":"normal"},{"_key":"8878b88774a7","_type":"block","children":[{"_key":"3b88953283490","_type":"span","marks":[],"text":"With this integration setup, when I run the command `mvn clean install deploy` it will compile the code, build the Jar file and upload the artefact to the S3 bucket. I can then use a bit of bash scripting magic to get the the values in the pom.xml file to work out the URL the artefact can be downloaded from once it is built."}],"markDefs":[],"style":"normal"},{"_key":"69b5d4abb5fb","_type":"block","children":[{"_key":"8c669f1d7bf80","_type":"span","marks":[],"text":"echo \"Started: $(date)\" echo \"Compiling Application and Generating WAR file and uploading to AWS s3\" mvn clean install deploy export AWS_REGION=\"us-west-2\" export VERSION=$(mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.version | grep -v '\\[') export GROUP_ID=$(mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.groupId | grep -v '\\[' | sed s@[.]@/@g) export ARTIFACT_ID=$(mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.artifactId | grep -v '\\[') export PACKAGING=$(mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.packaging | grep -v '\\[') export URL=\"https://s3-${AWS_REGION}.amazonaws.com/${ARTIFACT_ID}/release/${GROUP_ID}/${ARTIFACT_ID}/${VERSION}/${ARTIFACT_ID}-${VERSION}.${PACKAGING}\" echo \"Artifact URL ${URL}...\"] echo \"Finished: $(date)\"Copy"}],"markDefs":[],"style":"normal"},{"_key":"a51fd3fea387","_type":"block","children":[{"_key":"6cb447f9f4720","_type":"span","marks":[],"text":"That’s the artefact built and uploaded to the repository, I need to write the Ubuntu Upstart script run the application in the execution environment, in this case Ubuntu. This is a templated script that requires a few parameters to be set when its interpolated on the filesystem:"}],"markDefs":[],"style":"normal"},{"_key":"0eced4c7d7cb","_type":"block","children":[{"_key":"07646f1a308f0","_type":"span","marks":[],"text":"`app_install_path`, the location to store the application and its configuration."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"1d21dbbdc77f","_type":"block","children":[{"_key":"73b7db48c6b80","_type":"span","marks":[],"text":"`app_download_url`, so it can use curl to download the artefact from the S3 bucket."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"b2d81d1df8b8","_type":"block","children":[{"_key":"830bab3cf2110","_type":"span","marks":[],"text":"`app_port`, so it know which port to bind HTTP requests to."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"43c0cdaeb629","_type":"block","children":[{"_key":"e645cfc6872c0","_type":"span","marks":[],"text":"`consul_ip`, so it can get the Vault token."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"1529107baed6","_type":"block","children":[{"_key":"400bf63fdd9f0","_type":"span","marks":[],"text":"`vault_app_name', so it can get the application secrets from the Vault server."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"0f7b2f1cdf06","_type":"block","children":[{"_key":"c9400058aac00","_type":"span","marks":[],"text":"This Upstart script will download the application from the S3 bucket and write the environmental specific configuration the first time it is run. It then runs the application and streams the application log files to the file `/var/logs/javaapp.log`. When this Upstart script is in place (/etc/init/javaapp.conf) the application can be started with the command `sudo start javaapp` and hey, presto!, we have a simple, working ‘almost’ twelve factor app."}],"markDefs":[],"style":"normal"},{"_key":"510dc4778f14","_type":"block","children":[{"_key":"c8ffe1ad73630","_type":"span","marks":[],"text":"description \"My Demo Java Application\" start on runlevel [2345] stop on runlevel [!2345] respawn script if [ ! -f ${app_install_path}/my-app-demo.jar ]; then echo \"Downloading Java app...\" sudo mkdir -p ${app_install_path} sudo curl -L \"${app_download_url}\" > /tmp/my-app-demo.jar sudo mv /tmp/my-app-demo.jar ${app_install_path}/my-app-demo.jar sudo chown root:root ${app_install_path}/my-app-demo.jar sudo chmod 0644 ${app_install_path}/my-app-demo.jar cat << EOF | sudo tee ${app_install_path}/application.properties server.compression.enabled: true server.compression.min-response-size: 1 server.port = ${app_port} management.port: 8091 management.address: 127.0.0.1 Info.app.name: SpringBoot Demo Application Info.app.description: This is my first spring boot application Info.app.version: 1.0.0 EOF sudo chown root:root ${app_install_path}/application.properties sudo chmod 0644 ${app_install_path}/application.properties export VAULT_TOKEN=$(curl -sf \"http://${consul_ip}:8500/v1/kv/service/vault/root-token?raw\") cat << EOF | sudo tee ${app_install_path}/bootstrap.properties spring.application.name: ${vault_app_name} spring.cloud.vault.host: ${consul_ip} spring.cloud.vault.port: 8200 spring.cloud.vault.scheme: http spring.cloud.vault.token: $${VAULT_TOKEN} spring.cloud.vault.connection-timeout: 5000 spring.cloud.vault.read-timeout: 15000 spring.cloud.vault.config.order: -10 EOF sudo chown root:root ${app_install_path}/bootstrap.properties sudo chmod 0644 ${app_install_path}/bootstrap.properties fi exec /usr/bin/java -jar ${app_install_path}/my-app-demo.jar --spring.config.location=${app_install_path}/ >>/var/log/java_app.log 2>&1 end scriptCopy"}],"markDefs":[],"style":"normal"},{"_key":"2356f5186831","_type":"block","children":[{"_key":"4df983a99a290","_type":"span","marks":[],"text":"To conclude, this application uses many practices of the twelve-factor app methodology to make it simple to build, deploy and monitor using a number of interesting technologies. The source code is stored in Git, the Java application is built using Maven and gets its secrets from Vault and the resulting application is uploaded to an S3 repository. The execution environment uses Consul to get the application URL, which is then downloaded from the S3 repository and executed using Upstart."}],"markDefs":[],"style":"normal"},{"_key":"11f2eef7bda3","_type":"block","children":[{"_key":"27fe9d37f6370","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"815a68ad063f","_type":"block","children":[{"_key":"18d8298bccc20","_type":"span","marks":[],"text":"In the next instalment of this blog I will explain how I have used Packer and Terraform to build out the runtime environments, which include a Consul and Vault server cluster and the client servers which host the application."}],"markDefs":[],"style":"normal"},{"_key":"0b3c72b97986","_type":"block","children":[{"_key":"7e8f4bbb243c0","_type":"span","marks":[],"text":"This application is a work in progress and I'd love you to take a look, learn from it, or even better, tell me how I can improve this application to truly show off the principles of a twelve-factor application. All suggestions welcome, apart from suggesting to rewrite it to a newer 'cooler' language like Golang or Rust…! :)"}],"markDefs":[],"style":"normal"}],"author":{"name":"Alex Manly","image":{"alt":"Alex Manly","asset":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAgEBgcJ/8QAIhAAAQMDBAMBAAAAAAAAAAAAAgEDBAAFBgcREjEIIWFR/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQP/xAAYEQADAQEAAAAAAAAAAAAAAAAAAQIRA//aAAwDAQACEQMRAD8Aagy4gRfib1jEYXrtmrMqHPkhLbkbmCOrxVtF9pxqb5M5Lcca08J60PKw/IeRlXB7FF72pSrNqRkFrksPw5PCQ2XInV9k58X5Q5bzCnO5lPUdEKKrmn18eyLDrXdJQCD8hlDNB63opJn/2Q==","aspectRatio":1.5001391594767604,"src":"https://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=80&h=53&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=120&h=80&fit=crop 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=160&h=107&fit=crop 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=240&h=160&fit=crop 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg 5390w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=80&h=53&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=120&h=80&fit=crop&fm=webp 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=160&h=107&fit=crop&fm=webp 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?w=240&h=160&fit=crop&fm=webp 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/bbb13d83011f94fd57968526f24935111451ba5d-5390x3593.jpg?fm=webp 5390w","sizes":"(max-width: 80px) 100vw, 80px"}}}}},"moreArticles":[{"title":"DevOps, the All Blacks and Eddie Jones: How Culture, Leadership and Learning Drive Transformation","slug":{"current":"devops-the-all-blacks-and-eddie-jones-how-culture-leadership-and-learning-drive-transformation"},"publishedAt":"28 April 2017","heroImage":{"alt":"DevOps, the All Blacks and Eddie Jones: How Culture, Leadership and Learning Drive Transformation","asset":{"fluid":{"aspectRatio":1.4754098360655739,"src":"https://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=630&h=427&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=158&h=107&fit=crop 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=315&h=214&fit=crop 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=630&h=427&fit=crop 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=945&h=641&fit=crop 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=1200&h=813&fit=crop 1200w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=630&h=427&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=158&h=107&fit=crop&fm=webp 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=315&h=214&fit=crop&fm=webp 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=630&h=427&fit=crop&fm=webp 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=945&h=641&fit=crop&fm=webp 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/baa89cc7b22a19f5ce29d73ba285582cb84140e6-1200x800.jpg?w=1200&h=813&fit=crop&fm=webp 1200w","sizes":"(max-width: 630px) 100vw, 630px"}}},"author":{"name":"Ian Morgan","image":null}},{"title":"DockerCon 2017: Using Docker to Modernize Your Legacy Apps","slug":{"current":"dockercon-2017-using-docker-to-modernise-your-legacy-apps"},"publishedAt":"27 April 2017","heroImage":{"alt":"DockerCon 2017: Using Docker to Modernize Your Legacy Apps","asset":{"fluid":{"aspectRatio":1.4858490566037736,"src":"https://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=630&h=424&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=158&h=106&fit=crop 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=315&h=212&fit=crop 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=630&h=424&fit=crop 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=945&h=636&fit=crop 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=975&h=656&fit=crop 975w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=630&h=424&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=158&h=106&fit=crop&fm=webp 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=315&h=212&fit=crop&fm=webp 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=630&h=424&fit=crop&fm=webp 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=945&h=636&fit=crop&fm=webp 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/14a0d0656fbb330f474a21acaef7f877bc541e9e-975x424.png?w=975&h=656&fit=crop&fm=webp 975w","sizes":"(max-width: 630px) 100vw, 630px"}}},"author":{"name":"Benjamin Wootton","image":{"alt":"Benjamin Wootton","asset":{"fluid":{"base64":"data:image/png;base64,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","aspectRatio":1,"src":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=80&h=80&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=120&h=120&fit=crop 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=160&h=160&fit=crop 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=240&h=240&fit=crop 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png 420w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=80&h=80&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=120&h=120&fit=crop&fm=webp 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=160&h=160&fit=crop&fm=webp 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=240&h=240&fit=crop&fm=webp 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?fm=webp 420w","sizes":"(max-width: 80px) 100vw, 80px"}}}}},{"title":"Why DevOps and the Cloud Are a Match Made in Heaven","slug":{"current":"why-devops-and-the-cloud-are-a-match-made-in-heaven"},"publishedAt":"21 April 2017","heroImage":{"alt":"Why DevOps and the Cloud Are a Match Made in Heaven","asset":{"fluid":{"aspectRatio":1.4754098360655739,"src":"https://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=630&h=427&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=158&h=107&fit=crop 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=315&h=214&fit=crop 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=630&h=427&fit=crop 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=945&h=641&fit=crop 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=1200&h=813&fit=crop 1200w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=630&h=427&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=158&h=107&fit=crop&fm=webp 158w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=315&h=214&fit=crop&fm=webp 315w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=630&h=427&fit=crop&fm=webp 630w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=945&h=641&fit=crop&fm=webp 945w,\nhttps://cdn.sanity.io/images/hgftikht/production/593a7109d176864cb039bc86a39098aec708d1c2-1200x800.jpg?w=1200&h=813&fit=crop&fm=webp 1200w","sizes":"(max-width: 630px) 100vw, 630px"}}},"author":{"name":"Benjamin Wootton","image":{"alt":"Benjamin Wootton","asset":{"fluid":{"base64":"data:image/png;base64,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","aspectRatio":1,"src":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=80&h=80&fit=crop","srcSet":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=120&h=120&fit=crop 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=160&h=160&fit=crop 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=240&h=240&fit=crop 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png 420w","srcWebp":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=80&h=80&fit=crop&fm=webp","srcSetWebp":"https://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=120&h=120&fit=crop&fm=webp 120w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=160&h=160&fit=crop&fm=webp 160w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?w=240&h=240&fit=crop&fm=webp 240w,\nhttps://cdn.sanity.io/images/hgftikht/production/3f296f1054c4071eddb46d9d64631cd858167912-420x420.png?fm=webp 420w","sizes":"(max-width: 80px) 100vw, 80px"}}}}}],"sanityPage":{"slug":{"current":"insights"},"blocks":[{"__typename":"SanitySignupBlock","_key":"bcb83330a70e","_type":"signupBlock","component":"module---src-components-blocks-signup-block-index-js-default-","reference":{"title":"Sign-up: Insights Directly to Your Inbox","subtitle":"Join tens of thousands of your peers and sign-up for our best content and industry commentary, curated by our experts.","successMessage":"Thanks for signing-up!","submitBtn":"Subscribe","marketoSnippet":"<script src=\"https://www10.contino.io/js/forms2/js/forms2.min.js\"></script><form id=\"mktoForm_1126\"></form>   <script>    MktoForms2.setOptions({formXDPath : \"/rs/964-BIK-421/images/marketo-xdframe-relative.html\"});    MktoForms2.loadForm(\"//www10.contino.io\", \"964-BIK-421\", 1126);   </script>"}}]}},"pageContext":{"sanityId":"b703af82-1872-4aaf-94d6-a638e48b4a9d"}},"staticQueryHashes":["2919194494","3157258374","3449559901"],"moduleDependencies":["module---src-components-blocks-signup-block-index-js-default-"]}